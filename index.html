<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Sistema de Colabora√ß√£o</title>
<style>
body{font-family:Arial;background:#f5f7fa;margin:0;padding:20px}
.section{background:#fff;padding:15px;border-radius:10px;box-shadow:0 2px 6px rgba(0,0,0,0.1);margin-bottom:20px}
button{background:#0077cc;color:#fff;border:none;border-radius:6px;padding:6px 10px;cursor:pointer}
button:hover{background:#005fa3}
</style>
</head>
<body>

<h1>üåê Sistema de Colabora√ß√£o Online</h1>
<p>Participantes e anota√ß√µes compartilhados via backend seguro no Render</p>

<div class="section">
  <h2>üë• Participantes</h2>
  <table id="participantsTable" border="1" width="100%">
    <thead><tr><th>Nome</th><th>Fun√ß√£o/Papel</th><th>Observa√ß√µes</th></tr></thead>
    <tbody></tbody>
  </table>
  <h3>Adicionar Participante</h3>
  <input id="nameInput" placeholder="Nome"><br>
  <input id="roleInput" placeholder="Fun√ß√£o"><br>
  <textarea id="notesInput" placeholder="Observa√ß√µes"></textarea><br>
  <button onclick="addParticipant()">Adicionar</button>
</div>

<div class="section">
  <h2>üìù Anota√ß√µes</h2>
  <textarea id="quickNotes" rows="6" style="width:100%"></textarea><br>
  <button onclick="saveNotes()">Salvar Anota√ß√µes</button>
</div>

<script>
const API_URL = "https://colab-backend.onrender.com/api";
const tbody = document.querySelector("#participantsTable tbody");

async function loadData() {
  const res = await fetch(API_URL + "/data");
  const data = await res.json();
  tbody.innerHTML = "";
  data.participants.forEach(p => {
    const tr = document.createElement("tr");
    tr.innerHTML = `<td>${p.name}</td><td>${p.role}</td><td>${p.notes}</td>`;
    tbody.appendChild(tr);
  });
  document.getElementById("quickNotes").value = data.notes || "";
}

async function addParticipant() {
  const name = document.getElementById("nameInput").value.trim();
  const role = document.getElementById("roleInput").value.trim();
  const notes = document.getElementById("notesInput").value.trim();
  if(!name) return alert("Insira o nome");
  await fetch(API_URL + "/add", {
    method: "POST",
    headers: {"Content-Type":"application/json"},
    body: JSON.stringify({name, role, notes})
  });
  loadData();
}

async function saveNotes() {
  const notes = document.getElementById("quickNotes").value;
  await fetch(API_URL + "/notes", {
    method: "POST",
    headers: {"Content-Type":"application/json"},
    body: JSON.stringify({notes})
  });
  alert("Anota√ß√µes salvas!");
}

loadData();
</script>

</body>
</html>
